<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    <title>购物车</title>

    <link href="bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="style.css" rel="stylesheet">
  </head>
  <body>
      <div class="container">
          <div class="row header-title">
              <div class="col-xs-12">
                  <div class="center-block">
                      <h3>购物车</h3>
                  </div>
              </div>
          </div>
          <div class="" id="container" style="margin-bottom:20px;">

          </div>
          <div class="row">
              <div class="col-xs-12" style="color:#f00;">
                  总计： <span id="currency">￥</span><span id="totalAmount"></span>
              </div>
          </div>
         
          <div class="row" style="margin-top:20px;">
              <div class="col-xs-12 col-sm-6">
                 
                 币种：<select  id="select_currency">
                         <option value="￥">CNY</option>
                         <option value="HK$">HKD</option>
                         <option value="$">USD</option>
                      </select>                
              </div>
          </div>

          <div class="row" style="margin-top:20px;">
              <div class="col-xs-12">
                  <div class="btn btn-lg btn-block btn-primary" id="payBtn">
                     一键支付
                  </div>
                
              </div>
          </div>

 <div class="row" style="margin-top:20px;">
              <div class="col-xs-12">
                  <div class="btn btn-lg btn-block btn-primary" id="wPayBtn">
                    微信支付
                  </div>
                
              </div>
          </div>
            
      </div>
    <script src="bower_components/jquery/dist/jquery.min.js"></script>
    <script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="handlebars-v2.0.0.js"></script>
    <script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js" ></script>
     <script src="yunshouyin/yunshouyin-1.0.js" type="text/javascript"></script>
    <script src="js/cart.js"></script>
    <script >

    window.onload=yunshouyin.onload;

    var currency=$("#select_currency").val();
      $("#currency").html(currency);
     $('#select_currency').change(function() {
      var currency=$("#select_currency").val();
      $("#currency").html(currency);
     });


      $('#payBtn').click(function() {
               var sumAmount = $("#totalAmount").text();
               var currency=$("#select_currency").find('option:selected').text();        
               var orderNum = "";
               for (var i = 0; i < 12; i++) {
               orderNum = orderNum + Math.floor(Math.random() * 10);
        }

           var orderData = {
                orderNumber: orderNum,
                orderAmount: sumAmount,
                orderCurrency: currency,
                backUrl: "status.html",
                frontUrl: "status.html",
                merID: "100000000000013",
                inscd:"10134001",
                appId: "wx25ac886b6dac7dd2",
                secretKey: "1dgvvzp4jahxjmwtbavxurx2pxkiykwb",
                goodsInfo:"测试商品，这是一个测试商品订单"
        };

         yunshouyin.startOneKeyPay(orderData);
            });

   

$('#wPayBtn').click(function() {
               var sumAmount = $("#totalAmount").text();
               var currency=$("#select_currency").find('option:selected').text();        
               var orderNum = "";
               for (var i = 0; i < 12; i++) {
               orderNum = orderNum + Math.floor(Math.random() * 10);
        }

          var orderData = {
                orderNumber: orderNum,
                orderAmount: sumAmount,
                orderCurrency: currency,
                backUrl: "status.html",
                frontUrl: "status.html",
                merID: "100000000000013",
                inscd:"10134001",
                appId: "wx25ac886b6dac7dd2",
                secretKey: "1dgvvzp4jahxjmwtbavxurx2pxkiykwb",
                goodsInfo:"测试商品，这是一个测试商品订单"
        };

         yunshouyin.startWPay(orderData);
            });



    </script>
    <script id="itemTemplate" type="text/x-handlebars-template">

        <div class="cart-item">
            <div class="cart-item-pic">
                <img src="{{pic}}" alt="{{name}}" />
            </div>
                {{price}} * {{count}}
            <div class="cart-item-amount">
                {{total}}元
            </div>
        </div>
    </script>
  </body>
</html>
